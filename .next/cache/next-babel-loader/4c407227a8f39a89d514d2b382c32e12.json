{"ast":null,"code":"var _jsxFileName = \"/Users/home/Desktop/fullstack-boilerplate/blogr-nextjs-prisma/pages/index.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Layout from \"../components/Layout\";\nimport Post from \"../components/Post\";\nimport prisma from '../lib/prisma'; // export const getStaticProps: GetStaticProps = async () => {\n//   const feed = [\n//     {\n//       id: 1,\n//       title: \"Prisma is the perfect ORM for Next.js\",\n//       content: \"[Prisma](https://github.com/prisma/prisma) and Next.js go _great_ together!\",\n//       published: false,\n//       author: {\n//         name: \"Nikolas Burk\",\n//         email: \"burk@prisma.io\",\n//       },\n//     },\n//   ]\n//   return { props: { feed } }\n// }\n\nexport const getStaticProps = async () => {\n  const feed = await prisma.user.findMany({\n    include: {\n      posts: true\n    } // where: { published: true },\n    // include: {\n    //   author: {\n    //     select: { name: true },\n    //   },\n    // },\n\n  });\n  const readyFeed = dateStripped(feed);\n  console.log('getStaticProps:', readyFeed);\n  return {\n    props: {\n      feed\n    }\n  };\n};\n\nconst dateStripped = obj => {\n  let newObj = {};\n  Object.keys(obj).forEach(key => {\n    let value = obj[key];\n\n    if (value !== null) {\n      // If array, loop...\n      if (Array.isArray(value)) {\n        value = value.map(item => dateStripped(item));\n      } // ...if property is date/time, stringify/parse...\n      else if (typeof value === 'object' && typeof value.getMonth === 'function') {\n        value = JSON.parse(JSON.stringify(value));\n      } // ...and if a deep object, loop.\n      else if (typeof value === 'object') {\n        value = dateStripped(value);\n      }\n    }\n\n    newObj[key] = value;\n  });\n  console.log('newObj:', newObj);\n  return newObj;\n};\n\nconst Blog = props => {\n  console.log('props:', props);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3495282894\" + \" \" + \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-3495282894\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Public Feed\"), __jsx(\"main\", {\n    className: \"jsx-3495282894\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, props.feed.posts.map(post => __jsx(\"div\", {\n    key: post.id,\n    className: \"jsx-3495282894\" + \" \" + \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, __jsx(Post, {\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }))))), __jsx(_JSXStyle, {\n    id: \"3495282894\",\n    __self: this\n  }, \".post.jsx-3495282894{background:white;-webkit-transition:box-shadow 0.1s ease-in;transition:box-shadow 0.1s ease-in;}.post.jsx-3495282894:hover{box-shadow:1px 1px 3px #aaa;}.post.jsx-3495282894+.post.jsx-3495282894{margin-top:2rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ob21lL0Rlc2t0b3AvZnVsbHN0YWNrLWJvaWxlcnBsYXRlL2Jsb2dyLW5leHRqcy1wcmlzbWEvcGFnZXMvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9Ga0IsQUFHNEIsQUFLVyxBQUlaLGdCQUNsQixDQVRxQyxXQUtyQyxtRUFKQSIsImZpbGUiOiIvVXNlcnMvaG9tZS9EZXNrdG9wL2Z1bGxzdGFjay1ib2lsZXJwbGF0ZS9ibG9nci1uZXh0anMtcHJpc21hL3BhZ2VzL2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgR2V0U3RhdGljUHJvcHMgfSBmcm9tIFwibmV4dFwiXG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi9jb21wb25lbnRzL0xheW91dFwiXG5pbXBvcnQgUG9zdCwgeyBQb3N0UHJvcHMgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3N0XCJcbmltcG9ydCBwcmlzbWEgZnJvbSAnLi4vbGliL3ByaXNtYSc7XG5cbi8vIGV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wczogR2V0U3RhdGljUHJvcHMgPSBhc3luYyAoKSA9PiB7XG4vLyAgIGNvbnN0IGZlZWQgPSBbXG4vLyAgICAge1xuLy8gICAgICAgaWQ6IDEsXG4vLyAgICAgICB0aXRsZTogXCJQcmlzbWEgaXMgdGhlIHBlcmZlY3QgT1JNIGZvciBOZXh0LmpzXCIsXG4vLyAgICAgICBjb250ZW50OiBcIltQcmlzbWFdKGh0dHBzOi8vZ2l0aHViLmNvbS9wcmlzbWEvcHJpc21hKSBhbmQgTmV4dC5qcyBnbyBfZ3JlYXRfIHRvZ2V0aGVyIVwiLFxuLy8gICAgICAgcHVibGlzaGVkOiBmYWxzZSxcbi8vICAgICAgIGF1dGhvcjoge1xuLy8gICAgICAgICBuYW1lOiBcIk5pa29sYXMgQnVya1wiLFxuLy8gICAgICAgICBlbWFpbDogXCJidXJrQHByaXNtYS5pb1wiLFxuLy8gICAgICAgfSxcbi8vICAgICB9LFxuLy8gICBdXG4vLyAgIHJldHVybiB7IHByb3BzOiB7IGZlZWQgfSB9XG4vLyB9XG5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wczogR2V0U3RhdGljUHJvcHMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGZlZWQgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgaW5jbHVkZTogeyBwb3N0czogdHJ1ZSB9LFxuICAgIC8vIHdoZXJlOiB7IHB1Ymxpc2hlZDogdHJ1ZSB9LFxuICAgIC8vIGluY2x1ZGU6IHtcbiAgICAvLyAgIGF1dGhvcjoge1xuICAgIC8vICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSB9LFxuICAgIC8vICAgfSxcbiAgICAvLyB9LFxuICB9KTtcbiAgY29uc3QgcmVhZHlGZWVkID0gZGF0ZVN0cmlwcGVkKGZlZWQpO1xuXG4gIGNvbnNvbGUubG9nKCdnZXRTdGF0aWNQcm9wczonLCByZWFkeUZlZWQpO1xuXG5cbiAgcmV0dXJuIHsgcHJvcHM6IHsgZmVlZCB9IH07XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBmZWVkOiBQb3N0UHJvcHNbXVxufVxuXG5jb25zdCBkYXRlU3RyaXBwZWQgPSBvYmogPT4ge1xuXHRsZXQgbmV3T2JqID0ge31cblx0T2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0bGV0IHZhbHVlID0gb2JqW2tleV1cblx0XHRpZiAodmFsdWUgIT09IG51bGwpIHtcblx0XHRcdC8vIElmIGFycmF5LCBsb29wLi4uXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5tYXAoaXRlbSA9PiBkYXRlU3RyaXBwZWQoaXRlbSkpXG5cdFx0XHR9XG5cdFx0XHQvLyAuLi5pZiBwcm9wZXJ0eSBpcyBkYXRlL3RpbWUsIHN0cmluZ2lmeS9wYXJzZS4uLlxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUuZ2V0TW9udGggPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0dmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcblx0XHRcdH1cblx0XHRcdC8vIC4uLmFuZCBpZiBhIGRlZXAgb2JqZWN0LCBsb29wLlxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHR2YWx1ZSA9IGRhdGVTdHJpcHBlZCh2YWx1ZSlcblx0XHRcdH1cblx0XHR9XG5cdFx0bmV3T2JqW2tleV0gPSB2YWx1ZVxuXHR9KVxuICBjb25zb2xlLmxvZygnbmV3T2JqOicsIG5ld09iailcblxuXHRyZXR1cm4gbmV3T2JqXG59XG5cbmNvbnN0IEJsb2c6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBjb25zb2xlLmxvZygncHJvcHM6JywgcHJvcHMpXG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlXCI+XG4gICAgICAgIDxoMT5QdWJsaWMgRmVlZDwvaDE+XG4gICAgICAgIDxtYWluPlxuICAgICAgICAgIHtwcm9wcy5mZWVkLnBvc3RzLm1hcCgocG9zdCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e3Bvc3QuaWR9IGNsYXNzTmFtZT1cInBvc3RcIj5cbiAgICAgICAgICAgICAgPFBvc3QgcG9zdD17cG9zdH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L21haW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnBvc3Qge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgMC4xcyBlYXNlLWluO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBvc3Q6aG92ZXIge1xuICAgICAgICAgIGJveC1zaGFkb3c6IDFweCAxcHggM3B4ICNhYWE7XG4gICAgICAgIH1cblxuICAgICAgICAucG9zdCArIC5wb3N0IHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAycmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQmxvZ1xuIl19 */\\n/*@ sourceURL=/Users/home/Desktop/fullstack-boilerplate/blogr-nextjs-prisma/pages/index.tsx */\"));\n};\n\nexport default Blog;","map":{"version":3,"sources":["/Users/home/Desktop/fullstack-boilerplate/blogr-nextjs-prisma/pages/index.tsx"],"names":["React","Layout","Post","prisma","getStaticProps","feed","user","findMany","include","posts","readyFeed","dateStripped","console","log","props","obj","newObj","Object","keys","forEach","key","value","Array","isArray","map","item","getMonth","JSON","parse","stringify","Blog","post","id"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAgC,oBAAhC;AACA,OAAOC,MAAP,MAAmB,eAAnB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,cAA8B,GAAG,YAAY;AACxD,QAAMC,IAAI,GAAG,MAAMF,MAAM,CAACG,IAAP,CAAYC,QAAZ,CAAqB;AACtCC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAD6B,CAEtC;AACA;AACA;AACA;AACA;AACA;;AAPsC,GAArB,CAAnB;AASA,QAAMC,SAAS,GAAGC,YAAY,CAACN,IAAD,CAA9B;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BH,SAA/B;AAGA,SAAO;AAAEI,IAAAA,KAAK,EAAE;AAAET,MAAAA;AAAF;AAAT,GAAP;AACD,CAhBM;;AAsBP,MAAMM,YAAY,GAAGI,GAAG,IAAI;AAC3B,MAAIC,MAAM,GAAG,EAAb;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYH,GAAZ,EAAiBI,OAAjB,CAAyBC,GAAG,IAAI;AAC/B,QAAIC,KAAK,GAAGN,GAAG,CAACK,GAAD,CAAf;;AACA,QAAIC,KAAK,KAAK,IAAd,EAAoB;AACnB;AACA,UAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;AACzBA,QAAAA,KAAK,GAAGA,KAAK,CAACG,GAAN,CAAUC,IAAI,IAAId,YAAY,CAACc,IAAD,CAA9B,CAAR;AACA,OAFD,CAGA;AAHA,WAIK,IAAI,OAAOJ,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAK,CAACK,QAAb,KAA0B,UAA3D,EAAuE;AAC3EL,QAAAA,KAAK,GAAGM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeR,KAAf,CAAX,CAAR;AACA,OAFI,CAGL;AAHK,WAIA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AACnCA,QAAAA,KAAK,GAAGV,YAAY,CAACU,KAAD,CAApB;AACA;AACD;;AACDL,IAAAA,MAAM,CAACI,GAAD,CAAN,GAAcC,KAAd;AACA,GAjBD;AAkBCT,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBG,MAAvB;AAED,SAAOA,MAAP;AACA,CAvBD;;AAyBA,MAAMc,IAAqB,GAAIhB,KAAD,IAAW;AACvCF,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,KAAtB;AAEA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,KAAK,CAACT,IAAN,CAAWI,KAAX,CAAiBe,GAAjB,CAAsBO,IAAD,IACpB;AAAK,IAAA,GAAG,EAAEA,IAAI,CAACC,EAAf;AAAA,wCAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAED,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,CADH,CAFF,CADF;AAAA;AAAA;AAAA,klIADF;AA4BD,CA/BD;;AAiCA,eAAeD,IAAf","sourcesContent":["import React from \"react\"\nimport { GetStaticProps } from \"next\"\nimport Layout from \"../components/Layout\"\nimport Post, { PostProps } from \"../components/Post\"\nimport prisma from '../lib/prisma';\n\n// export const getStaticProps: GetStaticProps = async () => {\n//   const feed = [\n//     {\n//       id: 1,\n//       title: \"Prisma is the perfect ORM for Next.js\",\n//       content: \"[Prisma](https://github.com/prisma/prisma) and Next.js go _great_ together!\",\n//       published: false,\n//       author: {\n//         name: \"Nikolas Burk\",\n//         email: \"burk@prisma.io\",\n//       },\n//     },\n//   ]\n//   return { props: { feed } }\n// }\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const feed = await prisma.user.findMany({\n    include: { posts: true },\n    // where: { published: true },\n    // include: {\n    //   author: {\n    //     select: { name: true },\n    //   },\n    // },\n  });\n  const readyFeed = dateStripped(feed);\n\n  console.log('getStaticProps:', readyFeed);\n\n\n  return { props: { feed } };\n};\n\ntype Props = {\n  feed: PostProps[]\n}\n\nconst dateStripped = obj => {\n\tlet newObj = {}\n\tObject.keys(obj).forEach(key => {\n\t\tlet value = obj[key]\n\t\tif (value !== null) {\n\t\t\t// If array, loop...\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tvalue = value.map(item => dateStripped(item))\n\t\t\t}\n\t\t\t// ...if property is date/time, stringify/parse...\n\t\t\telse if (typeof value === 'object' && typeof value.getMonth === 'function') {\n\t\t\t\tvalue = JSON.parse(JSON.stringify(value))\n\t\t\t}\n\t\t\t// ...and if a deep object, loop.\n\t\t\telse if (typeof value === 'object') {\n\t\t\t\tvalue = dateStripped(value)\n\t\t\t}\n\t\t}\n\t\tnewObj[key] = value\n\t})\n  console.log('newObj:', newObj)\n\n\treturn newObj\n}\n\nconst Blog: React.FC<Props> = (props) => {\n  console.log('props:', props)\n\n  return (\n    <Layout>\n      <div className=\"page\">\n        <h1>Public Feed</h1>\n        <main>\n          {props.feed.posts.map((post) => (\n            <div key={post.id} className=\"post\">\n              <Post post={post} />\n            </div>\n          ))}\n        </main>\n      </div>\n      <style jsx>{`\n        .post {\n          background: white;\n          transition: box-shadow 0.1s ease-in;\n        }\n\n        .post:hover {\n          box-shadow: 1px 1px 3px #aaa;\n        }\n\n        .post + .post {\n          margin-top: 2rem;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default Blog\n"]},"metadata":{},"sourceType":"module"}