{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/home/Desktop/fullstack-boilerplate/shop-hopper-api/pages/index.tsx\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Layout from \"../components/Layout\";\nimport Post from \"../components/Post\";\n\nvar dateStripped = function dateStripped(obj) {\n  var newObj = {};\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n\n    if (value !== null) {\n      // If array, loop...\n      if (Array.isArray(value)) {\n        value = value.map(function (item) {\n          return dateStripped(item);\n        });\n      } // ...if property is date/time, stringify/parse...\n      else if (typeof value === 'object' && typeof value.getMonth === 'function') {\n        value = JSON.parse(JSON.stringify(value));\n      } // ...and if a deep object, loop.\n      else if (typeof value === 'object') {\n        value = dateStripped(value);\n      }\n    }\n\n    newObj[key] = value;\n  });\n  return newObj;\n};\n\nvar Blog = function Blog(props) {\n  console.log('props:', props);\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3495282894\" + \" \" + \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Welcome to ShopHopper\"), __jsx(\"main\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, props.feed.map(function (post) {\n    return __jsx(\"div\", {\n      key: post.id,\n      className: \"jsx-3495282894\" + \" \" + \"post\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, __jsx(Post, {\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }\n    }));\n  }))), __jsx(_JSXStyle, {\n    id: \"3495282894\",\n    __self: _this\n  }, \".post.jsx-3495282894{background:white;-webkit-transition:box-shadow 0.1s ease-in;transition:box-shadow 0.1s ease-in;}.post.jsx-3495282894:hover{box-shadow:1px 1px 3px #aaa;}.post.jsx-3495282894+.post.jsx-3495282894{margin-top:2rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ob21lL0Rlc2t0b3AvZnVsbHN0YWNrLWJvaWxlcnBsYXRlL3Nob3AtaG9wcGVyLWFwaS9wYWdlcy9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUVrQixBQUc0QixBQUtXLEFBSVosZ0JBQ2xCLENBVHFDLFdBS3JDLG1FQUpBIiwiZmlsZSI6Ii9Vc2Vycy9ob21lL0Rlc2t0b3AvZnVsbHN0YWNrLWJvaWxlcnBsYXRlL3Nob3AtaG9wcGVyLWFwaS9wYWdlcy9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IEdldFN0YXRpY1Byb3BzIH0gZnJvbSBcIm5leHRcIlxuaW1wb3J0IExheW91dCBmcm9tIFwiLi4vY29tcG9uZW50cy9MYXlvdXRcIlxuaW1wb3J0IFBvc3QsIHsgUG9zdFByb3BzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9zdFwiXG5pbXBvcnQgcHJpc21hIGZyb20gJy4uL2xpYi9wcmlzbWEnO1xuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUHJvcHM6IEdldFN0YXRpY1Byb3BzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBmZWVkID0gYXdhaXQgcHJpc21hLnBvc3QuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IHB1Ymxpc2hlZDogdHJ1ZSB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGF1dGhvcjoge1xuICAgICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBhbGxVc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7IHBvc3RzOiB0cnVlIH0sXG4gIH0pXG5cbiAgY29uc3QgdXNlcnMgPSBkYXRlU3RyaXBwZWQoYWxsVXNlcnMpO1xuICAvLyBjb25zb2xlLmRpcih1c2VycywgeyBkZXB0aDogbnVsbCB9KVxuXG4gIHJldHVybiB7IHByb3BzOiB7IGZlZWQsIHVzZXJzIH0gfTtcbn07XG5cbmNvbnN0IGRhdGVTdHJpcHBlZCA9IG9iaiA9PiB7XG4gIGxldCBuZXdPYmogPSB7fVxuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHtcbiAgICBsZXQgdmFsdWUgPSBvYmpba2V5XVxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gSWYgYXJyYXksIGxvb3AuLi5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcChpdGVtID0+IGRhdGVTdHJpcHBlZChpdGVtKSlcbiAgICAgIH1cbiAgICAgIC8vIC4uLmlmIHByb3BlcnR5IGlzIGRhdGUvdGltZSwgc3RyaW5naWZ5L3BhcnNlLi4uXG4gICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5nZXRNb250aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsdWUpKVxuICAgICAgfVxuICAgICAgLy8gLi4uYW5kIGlmIGEgZGVlcCBvYmplY3QsIGxvb3AuXG4gICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHZhbHVlID0gZGF0ZVN0cmlwcGVkKHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICBuZXdPYmpba2V5XSA9IHZhbHVlXG4gIH0pXG4gIHJldHVybiBuZXdPYmpcbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgZmVlZDogUG9zdFByb3BzW11cbn1cblxuY29uc3QgQmxvZzogUmVhY3QuRkM8UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdwcm9wczonLCBwcm9wcylcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlXCI+XG4gICAgICAgIDxoMT5XZWxjb21lIHRvIFNob3BIb3BwZXI8L2gxPlxuICAgICAgICA8bWFpbj5cbiAgICAgICAgICB7cHJvcHMuZmVlZC5tYXAoKHBvc3QpID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtwb3N0LmlkfSBjbGFzc05hbWU9XCJwb3N0XCI+XG4gICAgICAgICAgICAgIDxQb3N0IHBvc3Q9e3Bvc3R9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9tYWluPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5wb3N0IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuMXMgZWFzZS1pbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0OmhvdmVyIHtcbiAgICAgICAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAjYWFhO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBvc3QgKyAucG9zdCB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMnJlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEJsb2dcbiJdfQ== */\\n/*@ sourceURL=/Users/home/Desktop/fullstack-boilerplate/shop-hopper-api/pages/index.tsx */\"));\n};\n\n_c = Blog;\nexport var __N_SSG = true;\nexport default Blog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blog\");","map":{"version":3,"sources":["/Users/home/Desktop/fullstack-boilerplate/shop-hopper-api/pages/index.tsx"],"names":["React","Layout","Post","dateStripped","obj","newObj","Object","keys","forEach","key","value","Array","isArray","map","item","getMonth","JSON","parse","stringify","Blog","props","console","log","feed","post","id"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAgC,oBAAhC;;AAuBA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,GAAG,EAAI;AAC1B,MAAIC,MAAM,GAAG,EAAb;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYH,GAAZ,EAAiBI,OAAjB,CAAyB,UAAAC,GAAG,EAAI;AAC9B,QAAIC,KAAK,GAAGN,GAAG,CAACK,GAAD,CAAf;;AACA,QAAIC,KAAK,KAAK,IAAd,EAAoB;AAClB;AACA,UAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;AACxBA,QAAAA,KAAK,GAAGA,KAAK,CAACG,GAAN,CAAU,UAAAC,IAAI;AAAA,iBAAIX,YAAY,CAACW,IAAD,CAAhB;AAAA,SAAd,CAAR;AACD,OAFD,CAGA;AAHA,WAIK,IAAI,OAAOJ,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAK,CAACK,QAAb,KAA0B,UAA3D,EAAuE;AAC1EL,QAAAA,KAAK,GAAGM,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeR,KAAf,CAAX,CAAR;AACD,OAFI,CAGL;AAHK,WAIA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAClCA,QAAAA,KAAK,GAAGP,YAAY,CAACO,KAAD,CAApB;AACD;AACF;;AACDL,IAAAA,MAAM,CAACI,GAAD,CAAN,GAAcC,KAAd;AACD,GAjBD;AAkBA,SAAOL,MAAP;AACD,CArBD;;AA2BA,IAAMc,IAAqB,GAAG,SAAxBA,IAAwB,CAACC,KAAD,EAAW;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,KAAK,CAACG,IAAN,CAAWV,GAAX,CAAe,UAACW,IAAD;AAAA,WACd;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACC,EAAf;AAAA,0CAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAED,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADc;AAAA,GAAf,CADH,CAFF,CADF;AAAA;AAAA;AAAA,89GADF;AA4BD,CA9BD;;KAAML,I;;AAgCN,eAAeA,IAAf","sourcesContent":["import React from \"react\"\nimport { GetStaticProps } from \"next\"\nimport Layout from \"../components/Layout\"\nimport Post, { PostProps } from \"../components/Post\"\nimport prisma from '../lib/prisma';\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const feed = await prisma.post.findMany({\n    where: { published: true },\n    include: {\n      author: {\n        select: { name: true },\n      },\n    },\n  });\n\n  const allUsers = await prisma.user.findMany({\n    include: { posts: true },\n  })\n\n  const users = dateStripped(allUsers);\n  // console.dir(users, { depth: null })\n\n  return { props: { feed, users } };\n};\n\nconst dateStripped = obj => {\n  let newObj = {}\n  Object.keys(obj).forEach(key => {\n    let value = obj[key]\n    if (value !== null) {\n      // If array, loop...\n      if (Array.isArray(value)) {\n        value = value.map(item => dateStripped(item))\n      }\n      // ...if property is date/time, stringify/parse...\n      else if (typeof value === 'object' && typeof value.getMonth === 'function') {\n        value = JSON.parse(JSON.stringify(value))\n      }\n      // ...and if a deep object, loop.\n      else if (typeof value === 'object') {\n        value = dateStripped(value)\n      }\n    }\n    newObj[key] = value\n  })\n  return newObj\n}\n\ntype Props = {\n  feed: PostProps[]\n}\n\nconst Blog: React.FC<Props> = (props) => {\n  console.log('props:', props)\n  return (\n    <Layout>\n      <div className=\"page\">\n        <h1>Welcome to ShopHopper</h1>\n        <main>\n          {props.feed.map((post) => (\n            <div key={post.id} className=\"post\">\n              <Post post={post} />\n            </div>\n          ))}\n        </main>\n      </div>\n      <style jsx>{`\n        .post {\n          background: white;\n          transition: box-shadow 0.1s ease-in;\n        }\n\n        .post:hover {\n          box-shadow: 1px 1px 3px #aaa;\n        }\n\n        .post + .post {\n          margin-top: 2rem;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default Blog\n"]},"metadata":{},"sourceType":"module"}